!function(t){function e(i){if(o[i])return o[i].exports;var r=o[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var o={};e.m=t,e.c=o,e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}({0:function(t,e){t.exports=window.$},5:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(0),r=o.n(i);/*!
 * larui 组件规范  v0.1
 * Url: www.css.com.cn
 * Copyright (c) 
 * License: none
 * 
 * 参数：
 * @ dataUrl  String
 *   渲染时间轴的action路径
 * @ renderType  String
 *   目前支持两种样式，类型 normal和round ， 默认normal
 * @ pageSize Int
 *   每页显示条数， 默认6条
 * @ showPic boolean  
 *   是否显示图片DOM
 * @ titleColor String
 *   标题颜色
 * @ contentColor String
 *   内容颜色
 * @ borderColor String
 *   边框颜色
 * @ yearBgColor String
 *   年份背景颜色
 * @ yearFontColor String
 *   年份字体颜色 
 * @ paramMap obj
 *   后台返回字段映射参数
 *	   imgPath    默认值 : 'imgPath',
 *	   title      默认值 : 'title',
 *	   id         默认值 : 'id',
 *	   year       默认值 : 'year',
 *	   host       默认值 : 'host',
 *	   address    默认值 : 'address',
 *	   remark     默认值 : 'remark',
 *	   link       默认值 : 'link'
 * @ afterLoad(e) function
 *   提供请求回调，每次请求dataUrl时，提供回调，其中的e为请求返回内容
 * 使用方法：
 *	$('.lar-timeline2-container').timeline({
 *		dataUrl : 'http://localhost:8080/lar-search-web/lar-ui/lar-timeline/data.json',
 *		renderType : 'normal'  //或者 "round"
 *	});
 * @ fixImgUrl string
 *   时间轴通用图片路径，覆盖任何图片。通常用在统一的ICON上，比如奖项。	
 * 
 * 注意事项：
 * 1. 本组件目前支持两种样式，一种是带年代带圆圈背景的时间轴，一种是普通时间轴
 * 
 */
window.$=r.a,function(t){function e(e,o){this.options=t.extend(!0,{},this.defaults,o),this.timeline=e,this.$timeline=t(e),this.currentYear=null,this.currentPage=1,this.pageSize=this.options.pageSize,this.afterLoad=this.options.afterLoad,this.executed=!1,this.fixImgUrl=this.options.fixImgUrl,this.init()}e.prototype={constructor:e,defaults:{dataUrl:"data.json",pageSize:5,renderType:"normal",showPic:!1,titleColor:"#000",contentColor:"#000",borderColor:"#c2c4c4",yearBgColor:"#ffc000",yearFontColor:"#fff",paramMap:{imgPath:"imgPath",title:"title",id:"id",year:"year"},fixImgUrl:null},init:function(){this.buildDom(),this.addEvent()},buildDom:function(){var t=this;t._buildBody(),t.$timeline.after('<div class="btn_dropDown"><button class="icon btn_arrow"></button></div>')},addEvent:function(){var t=this;t.$timeline.next(".btn_dropDown").find(".btn_arrow").bind("click",function(){t.currentPage++,t._buildBody()})},_buildBody:function(){var t=this;switch(t.$timeline.css("border-left","4px solid "+t.options.borderColor),t.options.renderType){case"normal":t._buildBodyNormal();break;case"round":t._buildBodyRound()}},_buildBodyRound:function(){var e=this,o=t.extend(e.options.param,{pageSize:e.pageSize,curPage:e.currentPage});t.post(e.options.dataUrl,o,function(o){var i=Math.ceil(o.model.allDataCount/e.pageSize);o.model.curPageData.length>0?(t.each(o.model.curPageData,function(t,o){o[e.options.paramMap.year]!==e.currentYear&&(e._renderYear(o[e.options.paramMap.year]),e.currentYear=o[e.options.paramMap.year]),e._renderRowInfo(o)}),e.currentPage>=i&&e._isLastPage(o.model.curPageData.length)):e._isLastPage(0),!1===e.executed&&"function"==typeof e.afterLoad&&(e.afterLoad.apply(this,[o]),e.executed=!0)},"json")},_buildBodyNormal:function(){var e=this,o=t.extend(e.options.param,{pageSize:e.pageSize,curPage:e.currentPage});t.post(e.options.dataUrl,o,function(o){var i=Math.ceil(o.model.allDataCount/e.pageSize);o.model.curPageData.length>0?(t.each(o.model.curPageData,function(t,o){e._renderRowInfo(o)}),e.currentPage>=i&&e._isLastPage(o.model.curPageData.length)):e._isLastPage(0),!1===e.executed&&"function"==typeof e.afterLoad&&(e.afterLoad.apply(this,[o]),e.executed=!0)},"json")},_renderYear:function(t){var e=this,o='<div class="lar-timeline2-block"><div style="background: '+e.options.yearBgColor+"; color : "+e.options.yearFontColor+'" class="lar-timeline2-year lar-timeline-round">'+(t||"")+"</div></div>";return e.$timeline.append(o),!1},_renderRowInfo:function(t){var e=this;switch(e.options.renderType){case"normal":var o='<div class="lar-timeline2-block"><div class="lar-timeline2-year lar-timeline-normal">'+t[e.options.paramMap.year]+'</div><div style="background : '+e.options.borderColor+'" class="lar-timeline2-img lar-timeline2-icon"></div><div style="border: 1px solid '+e.options.borderColor+'" class="lar-timeline2-content"><div style="border-right : 10px solid '+e.options.borderColor+'" class="lar-timeline2-arrow"></div>'+e._getFigureHTML(t[e.options.paramMap.imgPath])+'<article class="lar-timeline2-article"><h3 class="lar-timeline2-title">'+e._setTitleLink(t[e.options.paramMap.id],t[e.options.paramMap.title])+"</h3>"+e._getBodyHTML(t)+"</p></article></div> </div> ";break;case"round":var o='<div class="lar-timeline2-block"><div style="background : '+e.options.borderColor+'" class="lar-timeline2-img lar-timeline2-icon"></div><div style="border: 1px solid '+e.options.borderColor+'" class="lar-timeline2-content"><div style="border-right : 10px solid '+e.options.borderColor+'" class="lar-timeline2-arrow"></div>'+e._getFigureHTML(t[e.options.paramMap.imgPath])+'<article class="lar-timeline2-article"><h3 class="lar-timeline2-title">'+e._setTitleLink(t[e.options.paramMap.id],t[e.options.paramMap.title])+"</h3>"+e._getBodyHTML(t)+"</article></div> </div> "}return e.$timeline.append(o),!1},_getFigureHTML:function(t){return this.options.showPic?'<figure class="lar-timeline2-figure"><img onerror="placeholderImg(\'\',this)" src="'+(this.options.fixImgUrl?this.options.fixImgUrl:URL_FILE_SERVER+t)+'"></img></figure>':""},_getBodyHTML:function(t){var e=this,o="";return e.options.paramMap.hasOwnProperty("host")&&null!=t[e.options.paramMap.host]&&(o+='<p style="color: '+e.options.contentColor+'"><strong>主办单位</strong>: '+t[e.options.paramMap.host]+"</p>"),e.options.paramMap.hasOwnProperty("address")&&null!=t[e.options.paramMap.address]&&(o+='<p style="color: '+e.options.contentColor+'"><strong>地点</strong>: '+t[e.options.paramMap.address]+"</p>"),e.options.paramMap.hasOwnProperty("remark")&&null!=t[e.options.paramMap.remark]&&(o+='<p style="color: '+e.options.contentColor+'"><strong></strong> '+t[e.options.paramMap.remark]+"</p>"),o},_isLastPage:function(t){var e=this;0===t&&1==e.currentPage?e.$timeline.next(".btn_dropDown").empty():e.$timeline.next(".btn_dropDown").empty().append("已到底部")},_setTitleLink:function(t,e){var o=this;return o.options.link?'<a target="_blank" style="color: '+o.options.titleColor+'" href="'+o.options.link+"?id="+t+'">'+e+"</a>":'<span style="color: '+o.options.titleColor+'">'+e+"</span>"}},t.fn.timeline=function(o){return this.each(function(){return t.data(this,"timeline",new e(this,o))})}}(jQuery)}});