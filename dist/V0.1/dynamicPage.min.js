!function(e){function i(n){if(a[n])return a[n].exports;var s=a[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}var a={};i.m=e,i.c=a,i.d=function(e,a,n){i.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(a,"a",a),a},i.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},i.p="",i(i.s=16)}({0:function(e,i){e.exports=window.$},16:function(e,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=a(0),s=a.n(n);/*!
 * Created by skye on 2015/10/23.
 * larui lar-dynamicPage  v0.2
 * Url: www.css.com.cn
 * Copyright (c) 
 * License: none
 * 
 * 参数：
 * @ actionUrl  String
 *   获取数据的服务地址
 * @ searchPara  Object
 *   页面上的个性化查询参数，比如艺术门类，所在地等
 * @ setPcPageSize  int
 *   设置PC浏览器上每页显示的数据量
 * @ setmobilePageSize int
 * 	 设置手机浏览器上每页显示的数据量
 * @ setpageListBgColor
 *   设置按钮区按钮边框和背景颜色,及文字颜色
 * @ buildDom function (必填)
 *   本组件不体统dom结构区构建方法，调用者提供，并传给这个参数
 * @ bulidCallBk
 *   组件回调函数，可以执行调用者提供的回调方法，用来满足更多调用者需求。
 *                   
 * 使用方法：
 *  HTML - 找到需要放置分页内容的div或者section，并拿到该容器的唯一标示，eg:
 *	<section class="specialTopicDynamicContent">
 *	</section>
 *
 *  JS - 初始化
 *	$(".specialTopicDynamicContent").dynamicPage({
		actionUrl:actionUrl,
		searchPara:{firstIndex:'award',secIndex:''},
		buildDom:buildDomForSpecialTopic,
		setPcPageSize:16,
		setPcPageSize:10
	});
 *		
 * 注意事项：
 * 1. buildDom方法由调用者必须提供,是必填项
 * 2. 本组件只提供分页功能，即分页查询，渲染由buildDom方法提供。
 */
window.$=s.a,function(e){function i(i,a){var n={actionUrl:"",searchPara:{},pageSize:40,setPcPageSize:40,setmobilePageSize:10,setpageListBgColor:"#cd8802",buildDom:"",bulidCallBk:"",maxPage:97,pageHide:!1,pagingMethod:"manual",bottomOffset:255};return this.element=i,this.$container=e(this.element),this.options=e.extend(!0,{},n,a),this.pageNums=1,this.curIndex=1,this.pageTurn=0,this.isLastTurn=!1,this.windowWidth=e(window).width(),this.windowWidth<768?this.options.pageSize=this.options.setmobilePageSize:this.options.pageSize=this.options.setPcPageSize,this.init()}function a(i){var a=this;if(a.options.buildDom){var n="",s=a.options.buildDom;if("200"==i.status&&i.model.curPageData){n=s(i.model.curPageData),n=""==n||" "==n?"<div class='tipNoData'>没有符合的数据</div>":n,""!=n&&" "!=n||e(a.$container).find(".nextPageContainer span").hide()}else n="<div class='tipNoData'>没有符合的数据</div>",e(a.$container).find(".nextPageContainer span").hide();a.$containerUl.append(n),a.options.bulidCallBk&&a.options.bulidCallBk()}}function n(i){var a=this;if(i&&a.pageNums>0)if(a.windowWidth<768){var n=e("<li class='pageNum' index=prev><span><</span></li><li class='pageNum' index=next><span>></span></li>");e(a.$pagesList).append(n),e(a.$pagesList).parents(".lar-dynamicPage").find(".nextPageContainer .mobilePageInfo").html("1/"+a.pageNums)}else{var s=0;s=a.pageNums>4?4:a.pageNums,e(a.$pagesList).append("<li class='pageNum' index=prev><span><</span></li>");for(var t=1;t<s+2;t++)t==s+1?(e(a.$pagesList).append("<li class='pageNum' index=next><span>></span></li>"),e(a.$pagesList).append("<li class='total' index=total><span>共"+a.pageNums+"页</span></li>"),e(a.$pagesList).append("<li class='go' index=go><span>到第<input class='pageNumber'>页</span></li>"),e(a.$pagesList).append("<li class='ensure' index=ensure><span>确定</span></li>"),e(a.$pagesList).append("<li class='totalNum' index=totalNum><span>共"+a.totalNum+"条</span></li>")):e(a.$pagesList).append("<li class='pageNum page' index="+t+"><span>"+t+"</span></li>")}}function s(){var i=this;if(i.curIndex>1){var a=e.Deferred();e.when(p.apply(i,[{curPageNum:i.curIndex-1,dtd:a}])).done(function(){if(i.windowWidth>768&&i.curIndex%4==1&&i.pageTurn>0){i.pageTurn--,i.isLastTurn=!1,e(i.$pagesList).find("li.page").remove();for(var a=i.curIndex-1;a>i.curIndex-5;a--)e(i.$pagesList).find("li[index=prev]").after("<li class='pageNum page' index="+a+"><span>"+a+"</span></li>")}i.curIndex--,i.css("prev"),e(i.$pagesList).find("li").unbind("click"),i.events()})}}function t(){var i=this;if(i.curIndex<i.pageNums){var a=e.Deferred();e.when(p.apply(i,[{curPageNum:i.curIndex+1,dtd:a}])).done(function(){if(i.windowWidth>768&&i.curIndex%4==0&&i.pageTurn<Math.ceil(i.pageNums/4)){i.pageTurn++,i.isLastTurn=!1;var a=i.pageNums-i.curIndex;if(a>=4)for(var n=0;n<4;n++)e(i.$pagesList).find("li span:eq("+(n+1)+")").text(n+4*i.pageTurn+1);else for(var n=0;n<4;n++)n<a?e(i.$pagesList).find("li span:eq("+(n+1)+")").text(n+4*i.pageTurn+1):e(i.$pagesList).find("li:eq("+(a+1)+")").remove()}i.curIndex++,i.css("next")})}else e(i.$container).find(".nextPageContainer span.nextPageBtn").css({backgroundPosition:"-328px -324px"})}function o(){var i=this,a=parseInt(e(i.$pagesList).find("input").val());a>i.pageNums&&(a=i.pageNums,e(i.$pagesList).find("input").val(a));var n=e.Deferred();e.when(p.apply(i,[{curPageNum:a,dtd:n}])).done(function(){i.curIndex=a;i.pageTurn=Math.ceil(a/4)-1;var n=i.pageNums-a,s=Math.ceil(i.pageNums/4)-1;if(n>=4||i.pageTurn<s)r(i);else if(!i.isLastTurn){for(var t=i.pageNums-4*i.pageTurn,o=0;o<4;o++)o<t?e(i.$pagesList).find("li span:eq("+(o+1)+")").text(o+4*i.pageTurn+1):e(i.$pagesList).find("li:eq("+(t+1)+")").attr("index")==o+1&&e(i.$pagesList).find("li:eq("+(t+1)+")").remove();i.isLastTurn=!0}i.css()})}function p(i){var a=this,n=i.dtd;return a.loaded=!1,a.options.searchPara.curPage=i.curPageNum,e("ul.resultList").larLoading({text:"Loading",position:"bottom"}),e.ajax({url:a.options.actionUrl,data:a.options.searchPara,dataType:"json",type:"post",success:function(s){var t=s.model.curPageData,o=a.options.buildDom(t);a.options.additional||a.$containerUl.empty(),a.$containerUl.append(o),a.options.bulidCallBk&&a.options.bulidCallBk(),e(".nextPageContainer .mobilePageInfo").html(i.curPageNum+"/"+a.pageNums),e("ul.resultList").larLoading("hide"),a.loaded=!0,n.resolve()},fail:function(){return e(".resultList").larLoading("hide"),alert("数据获取失败"),!1}}),n.promise()}function r(i){var a=i,n=e(a.$pagesList).find("li").length;if(n<10){for(var s=10-n,t=0;t<s;t++)e(a.$pagesList).find("li:first").after("<li class='pageNum'><span></span></li>");e(this.$pagesList).find("li").unbind("click"),a.events()}for(var t=0;t<4;t++)e(a.$pagesList).find("li span:eq("+(t+1)+")").text(t+4*a.pageTurn+1).parent().attr("index",t+1);a.isLastTurn=!1}i.prototype.init=function(){var i=this,a=e.Deferred();return e(i.element).larLoading({text:"Loading",position:"inside"}),e.when(this.build(a)).done(function(){i.css(),i.events()}),a.promise()},i.prototype.build=function(i){var s=this;return s.options.searchPara.pageSize=s.options.pageSize,s.options.searchPara.curPage=s.curIndex,e.ajax({url:s.options.actionUrl,data:s.options.searchPara,type:"post",dataType:"json",success:function(o){if(s.pageNums=Math.ceil(o.model.allDataCount/s.options.pageSize),s.totalNum=o.model.allDataCount,s.$container.empty(),s.$container.append("<div class='lar-dynamicPage'><ul class='resultList clearfix'></ul><ul class='pagesList'>\t<div class='liList clearfix'>\t\t<ul style='display:"+(s.options.pageHide&&s.pageNums<=1||"manual"!=s.options.pagingMethod?"none":"inline-block")+"'></ul>\t</div></ul><div class='nextPageContainer' style='display:"+(s.options.pageHide&&s.pageNums<=1||"manual"!=s.options.pagingMethod?"none":"block")+"'>\t<span class='nextPageBtn'></span>\t<span class='mobilePageInfo'></span></div></div>"),s.$containerUl=s.$container.find(".resultList"),s.$pagesList=s.$container.find("ul.pagesList .liList ul"),a.apply(s,[o]),s.loaded=!0,"manual"==s.options.pagingMethod)e(window).unbind("scroll"),n.apply(s,[o.model.allDataCount]);else if("scrollDown"==s.options.pagingMethod){var p=s.options.bottomOffset;s.options.additional=!0;var r=e('<div class="loadAll">--加载完毕--</div>');s.$container.find(".lar-dynamicPage").append(r),e(window).unbind("scroll"),1==s.pageNums?r.show():s.pageNums>1&&e(window).on("scroll",function(i){var a=e(window),n=a.height(),o=a.scrollTop(),l=e(document).height();p+o>=l-n&&s.loaded&&(s.options.searchPara.curPage<=s.pageNums-1?t.apply(s):(r.show(),e(s.element).larLoading("hide"),e(window).unbind("scroll"))),i.stopPropagation()})}i.resolve(),e(s.element).larLoading("hide")}}),i.promise()},i.prototype.css=function(i){var a=this;e(a.$pagesList).find("li span").css({color:a.options.setpageListBgColor}),e(a.$pagesList).find(".pageNum ").css({border:"1px solid "+a.options.setpageListBgColor,backgroundColor:"#ffffff",color:a.options.setpageListBgColor}),e(a.$pagesList).find("li .pageNumber").css({border:"1px solid "+a.options.setpageListBgColor,backgroundColor:"#ffffff",color:a.options.setpageListBgColor}),e(a.$pagesList).find("li.ensure").css({border:"1px solid "+a.options.setpageListBgColor,backgroundColor:"#ffffff",color:a.options.setpageListBgColor}),e(a.$pagesList).find(".pageNum ").mouseover(function(){e(this).css({backgroundColor:a.options.setpageListBgColor,color:"#ffffff"}),e(this).find("span").css({color:"#ffffff"})}).mouseout(function(){e(this).hasClass("active")||(e(this).css({backgroundColor:"#ffffff",color:a.options.setpageListBgColor}),e(this).find("span").css({color:a.options.setpageListBgColor}))}),e(a.$pagesList).find("li").removeClass("active"),a.curIndex%4==0?e(a.$pagesList).find("li :eq(4)").parent().addClass("active"):e(a.$pagesList).find("li :eq("+a.curIndex%4+")").parent().addClass("active"),e(a.$pagesList).find("li.active").css({backgroundColor:a.options.setpageListBgColor}),e(a.$pagesList).find("li.active span").css({color:"#ffffff"});var n=e(a.$pagesList).find("li[index=prev]"),s=e(a.$pagesList).find("li[index=next]"),t=e(a.$pagesList).find("li.page.active");a.curIndex>=a.options.maxPage?(n.css({width:"auto"}),s.css({width:"auto"}),t.css({width:"auto"}),n.find("span").text("上一页"),s.find("span").text("下一页"),e(a.$pagesList).find("li.page").hide(),t.show()):(n.css({width:"20px"}),s.css({width:"20px"}),n.find("span").text("<"),s.find("span").text(">"),e(a.$pagesList).find("li.page").css({width:"20px"}),e(a.$pagesList).find("li.page").show())},i.prototype.events=function(){var i=this;this.$container.css({backgroundColor:"white"}),e(this.$pagesList).find("li").bind("click",function(){var a=e(this).attr("index");if(i.options.additional=!1,"prev"==a)s.apply(i);else if("next"==a)t.apply(i);else if("ensure"==a){if(!/^[0-9]*[1-9][0-9]*$/.test(e(i.$pagesList.find("input.pageNumber")).val()))return alert("请输入正确页数"),!1;o.apply(i)}else if("more"==a||"go"==a||"totalNum"==a||"total"==a)e(this).unbind("click");else{var n=parseInt(e(this).find("span").text());i.curIndex=n;var r=e.Deferred();e.when(p.apply(i,[{curPageNum:n,dtd:r}])).done(function(){i.css()})}}),e(this.$container).find(".nextPageContainer").bind("click",function(){i.options.additional=!0,t.apply(i)})},e.fn.dynamicPage=function(a){this.each(function(){return e.data(this,"plugin_dynamicPage")&&e.data(this,"plugin_dynamicPage",null),e.data(this,"plugin_dynamicPage",new i(this,a))})}}(jQuery)}});